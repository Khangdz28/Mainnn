local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local Blur = Instance.new("BlurEffect", game.Lighting)
Blur.Size = 12

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 400, 0, 320)
Frame.Position = UDim2.new(0.5, -200, 0.5, -160)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.BorderSizePixel = 0
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 15)

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 50)
Title.Text = "üîë Khngscript Key System"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextScaled = true
Title.BackgroundTransparency = 1

local Box = Instance.new("TextBox", Frame)
Box.Size = UDim2.new(0.85, 0, 0, 60)
Box.Position = UDim2.new(0.075, 0, 0.22, 0)
Box.PlaceholderText = "Nh·∫≠p key c·ªßa b·∫°n..."
Box.Text = ""
Box.TextColor3 = Color3.fromRGB(255,255,255)
Box.Font = Enum.Font.GothamBold
Box.TextScaled = true
Box.BackgroundColor3 = Color3.fromRGB(40,40,40)
Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 10)

-- Notify custom
local function CustomNotify(msg, kind)
    local Noti = Instance.new("TextLabel", ScreenGui)
    Noti.Size = UDim2.new(0, 320, 0, 45)
    Noti.Position = UDim2.new(1, -340, 1, -100)
    Noti.Text = (kind == "success" and "‚úÖ " or kind == "error" and "‚ùå " or kind == "link" and "üîó " or "‚ÑπÔ∏è ") .. msg
    Noti.TextColor3 = Color3.fromRGB(255,255,255)
    Noti.Font = Enum.Font.GothamBold
    Noti.TextScaled = true
    Noti.BackgroundTransparency = 0.1
    if kind == "success" then
        Noti.BackgroundColor3 = Color3.fromRGB(0,170,0)
    elseif kind == "error" then
        Noti.BackgroundColor3 = Color3.fromRGB(200,0,0)
    elseif kind == "link" then
        Noti.BackgroundColor3 = Color3.fromRGB(0,120,255)
    else
        Noti.BackgroundColor3 = Color3.fromRGB(60,60,60)
    end
    Instance.new("UICorner", Noti).CornerRadius = UDim.new(0, 8)
    game:GetService("TweenService"):Create(Noti, TweenInfo.new(0.4), {Position = UDim2.new(1, -340, 1, -160)}):Play()
    task.delay(2.5, function() Noti:Destroy() end)
end

local function createBtn(text, posY, color)
    local Btn = Instance.new("TextButton", Frame)
    Btn.Size = UDim2.new(0.85, 0, 0, 45)
    Btn.Position = UDim2.new(0.075, 0, posY, 0)
    Btn.Text = text
    Btn.TextColor3 = Color3.fromRGB(255,255,255)
    Btn.Font = Enum.Font.GothamBold
    Btn.TextScaled = true
    Btn.BackgroundColor3 = color
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 10)
    Btn.MouseEnter:Connect(function() Btn.BackgroundColor3 = color:Lerp(Color3.fromRGB(255,255,255), 0.15) end)
    Btn.MouseLeave:Connect(function() Btn.BackgroundColor3 = color end)
    return Btn
end

local Check = createBtn("‚úÖ Check Key", 0.50, Color3.fromRGB(0,170,0))
local GetKey = createBtn("üîó Get Key", 0.70, Color3.fromRGB(0,120,255))
local Discord = createBtn("üí¨ Discord", 0.85, Color3.fromRGB(114,137,218))

local function openLink(url, name)
    setclipboard(url)
    CustomNotify(name.." | ƒê√£ sao ch√©p & m·ªü link!", "link")
    if syn and syn.openbrowser then
        syn.openbrowser(url)
    elseif getrenv().openbrowser then
        openbrowser(url)
    else
        print("M·ªü th·ªß c√¥ng: "..url)
    end
end

GetKey.MouseButton1Click:Connect(function()
    openLink("https://authguard.org/a/541", "Get Key")
end)

Discord.MouseButton1Click:Connect(function()
    openLink("https://discord.gg/W65kW8hn", "Discord")
end)

Check.MouseButton1Click:Connect(function()
    local key = string.gsub(Box.Text, "%s+", "")
    if key == "" then
        CustomNotify("Key kh√¥ng h·ª£p l·ªá!", "error")
        return
    end
    CustomNotify("Key h·ª£p l·ªá! ƒêang load...", "success")
    task.wait(3)
    ScreenGui:Destroy()
    Blur:Destroy()

    -- HUB CH√çNH
    local Window = Rayfield:CreateWindow({
        Name = "Khngscript Hub",
        LoadingTitle = "Khngscript Loading...",
        LoadingSubtitle = "by Khangdz28",
        ConfigurationSaving = {
            Enabled = true,
            FolderName = "KhngscriptHub",
            FileName = "Config"
        },
        KeySystem = false
    })

    -- Trade Tab
    local tradeTab = Window:CreateTab("Trade", 4483362458)
    tradeTab:CreateSection("Freeze trade üîä")
    local toggles = {}
    local function toggleNotify(name, state)
        Rayfield:Notify({
            Title = "Freeze Trade",
            Content = name .. " is now " .. (state and "ON" or "OFF"),
            Duration = 3,
            Image = 4483362458,
        })
    end
    local btnNames = {"Auto Accept", "Can't Cancel", "Freeze Trade", "Can't Leave"}
    for _, name in ipairs(btnNames) do
        tradeTab:CreateToggle({
            Name = name,
            CurrentValue = false,
            Callback = function(Value)
                toggles[name] = Value
                toggleNotify(name, Value)
            end
        })
    end
    tradeTab:CreateButton({
        Name = "Leave Server",
        Callback = function()
            local TeleportService = game:GetService("TeleportService")
            TeleportService:TeleportToPlaceInstance(0, "", game.Players.LocalPlayer)
        end,
    })

    tradeTab:CreateSection("Fake trade üçä")
    tradeTab:CreateDropdown({
        Name = "L·ª±a ch·ªçn pet",
        Options = {
            "Kitsune", "Queen bee", "T-rex", "Disco bee", "Corrupted Kitsune", 
            "Raccoon", "Dragonfly", "Butterfly", "Spinosaurus", 
            "Lobster Thermidor", "French Fry Ferret","Phoenix"
        },
        CurrentOption = "None",
        Callback = function(Value)
            getgenv().SelectedPet = Value
        end,
    })
    tradeTab:CreateInput({
        Name = "Kg",
        PlaceholderText = "Nh·∫≠p s·ªë Kg",
        RemoveTextAfterFocusLost = false,
        Callback = function(Text)
            getgenv().SelectedKg = Text
        end,
    })
    tradeTab:CreateDropdown({
        Name = "Mutation",
        Options = {
            "Shiny", "Inverted", "Frozen", "Golden", "Tiny", "Ironskin",
            "Shocked", "Rainbow", "Radiant", "Ascended", "Tranqil", "Corrupt",
            "Fried", "Aromatic","Glimmer"
        },
        CurrentOption = "None",
        Callback = function(Value)
            getgenv().SelectedMutation = Value
        end,
    })
    tradeTab:CreateButton({
        Name = "Th√™m pet v√†o b·∫£ng trade (ph·∫£i c√≥ s·∫µn 1 con)",
        Callback = function()
            Rayfield:Notify({
                Title = "Fake Trade",
                Content = "ƒêang chuy·ªÉn...",
                Duration = 2,
            })
            task.wait(2)
            local mutation = tostring(getgenv().SelectedMutation or "")
            local pet = tostring(getgenv().SelectedPet or "")
            local kg = tostring(getgenv().SelectedKg or "")
            Rayfield:Notify({
                Title = "Fake Trade",
                Content = string.format("ƒê√£ chuy·ªÉn th√†nh c√¥ng: %s %s - %skg", mutation, pet, kg),
                Duration = 4,
            })
        end,
    })

    -- Randomize Tab
    local randTab = Window:CreateTab("Randomize", 4483362458)
    randTab:CreateButton({
        Name = "Randomize Pet",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Khangdz28/Randomizepet12/refs/heads/main/Khngscript"))()
        end,
    })
    randTab:CreateButton({
        Name = "Randomize Mutation",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Khangdz28/RandomizeMutation/refs/heads/main/Khngscript"))()
        end,
    })

    -- Spawner Tab
    local spawnerTab = Window:CreateTab("Spawner", 4483362458)
    spawnerTab:CreateButton({
        Name = "Run Spawner",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/ZusumeHub/ZusumeHub/refs/heads/main/UpdateZysumee"))()
        end,
    })

    -- Finder Tab
    local finderTab = Window:CreateTab("Finder", 4483362458)
    finderTab:CreateInput({
        Name = "Find Server",
        PlaceholderText = "Server b·∫°n ƒëang ·ªü hi·ªán t·∫°i l√†: v1701",
        RemoveTextAfterFocusLost = false,
        Callback = function() end,
    })
    finderTab:CreateButton({
        Name = "T√¨m Server",
        Callback = function()
            Rayfield:Notify({
                Title = "Finder",
                Content = "ƒêang t√¨m sever th√≠ch h·ª£p... Vui l√≤ng ƒë·ª£i",
                Duration = 3,
            })
        end,
    })
    finderTab:CreateInput({
        Name = "Find Pet",
        PlaceholderText = "Best pet in sever: ...",
        RemoveTextAfterFocusLost = false,
        Callback = function() end,
    })
    finderTab:CreateButton({
        Name = "B·∫Øt ƒë·∫ßu t√¨m",
        Callback = function()
            Rayfield:Notify({
                Title = "Finder",
                Content = "ƒêang t√¨m... Vui l√≤ng ƒë·ª£i",
                Duration = 3,
            })
            local priorityList = {
                "Corrupted Kitsune", "Queen bee", "Dragonfly", "T-rex", "Spinosaurus",
                "Butterfly", "Raccoon", "Disco bee", "Kitsune"
            }
            local bestPet = nil
            for _, player in ipairs(game.Players:GetPlayers()) do
                if player ~= game.Players.LocalPlayer then
                    local petsFolders = {player:FindFirstChild("Backpack"), player:FindFirstChild("Pets"), player:FindFirstChild("Garden")}
                    for _, folder in pairs(petsFolders) do
                        if folder then
                            for _, pet in pairs(folder:GetDescendants()) do
                                if table.find(priorityList, pet.Name) then
                                    bestPet = pet.Name
                                    break
                                end
                            end
                        end
                        if bestPet then break end
                    end
                end
                if bestPet then break end
            end
            Rayfield:Notify({
                Title = "Finder",
                Content = "Best pet in server is: " .. (bestPet or "No"),
                Duration = 4,
            })
        end,
    })
end)
